//--------------------------------------------------------------
// rAthena 數据封包配置文件
// 由 davidsiaw 翻譯成英文
// 由 ａｌｏｎｅ 將本文件翻譯成中文并提交到 BetterRa
//--------------------------------------------------------------


// 在終端窗口中, 顯示調試報告
// 啟用之后, 每當客戶端建立連接時, 你可以在終端里面留意到下列提示信息: 
// “連接檢查: 來自 127.0.0.1 的連接請求已被允許\n”
debug: no

// Linux/Epoll: Maximum Events per cycle
// Default Value:
//	(Maximum Supported Connections)/2
// NOTE: this controls the maximum collected socket-events per-cycle (call to epoll_wait())
//       for example settings this to 32 will allow up to 32 events (incoming data/new connections
//       per server-cycle.
// NOTE: Recommended Settings is at least half the maximum supported connections
//       Settings this to a lower value, may cause lags/delays
//       Depending on available CPU Time
// NOTE: This Setting is only available on Linux when build using EPoll as event dispatcher!
//
//epoll_maxevents: 1024

// 套接字在被關閉之前, 可以滯留多長時間(單位為秒)
// 在一般情況下, 服務端為了能夠和其他程序或其他電腦通訊, 
// 會專門為了建立請求而創建一种叫套接字的連接接口. 
// 一般來說當連接關閉之后, 套接字就會等待一定的時間, 然后才被系統銷毀. 
// 這里所設置的就是套接字在關閉連接后直到被銷毀的滯留時間
//
// 套接字你可以理解為停船的港口, 連接可以理解是停泊在港口的船, 
// 當船离開港口之后, 再過多長時間就會將港口拆掉? 
stall_time: 60

//----- IP 規則設置 -----

// 當有新的連接請求需要建立時, 是否先檢查對方的IP地址
// 這個選項打開時, 也會啟用 DDoS 攻擊防護机制.
enable_ip_rules: yes

// 檢查IP地址是否合法的名單順序
//   deny,allow     : 先檢查黑名單規則, 再檢查白名單規則, 
//                    如果IP地址沒有在任何名單中出現, 則通過. 
//   allow,deny     : 先檢查白名單規則, 再檢查黑名單規則, 
//                    如果IP地址沒有在任何名單中出現, 則通過. 
//   mutual-failure : 要求IP地址必須白名單中, 
//                    并且与此同時不在黑名單中, 才判定為通過. 
// (默認值為 deny,allow 表示先檢查黑名單規則, 再檢查白名單規則)

order: deny,allow
// order: allow,deny
// order: mutual-failure

// IP 規則
//   allow : 允許連接的IP范圍(哪怕它被標記為DDoS的攻擊者)
//   deny  : 拒絕連接的IP范圍
// 程序在處理規則的時候, 优先使用匹配上IP地址的第一個設置

allow: 127.0.0.1
allow: 192.168.0.0/16
// allow: 10.0.0.0/255.0.0.0
// allow: all

// deny: 127.0.0.1


//---- DDoS 攻擊防護設置 ----
// 如果在 ddos_interval 選項指定的時間間隔內, 某個IP地址建立連接的次數
// 超過了 ddos_count 選項指定的次數, 那么將這個IP視為發起了DDoS攻擊

// 連續嘗試建立連接的間隔時間 (單位為毫秒)
// (默認值為 3000 毫秒, 即3秒)
ddos_interval: 3000

// 連續嘗試建立連接的次數
// (默認值為 5 次)
ddos_count: 5

// 當某個IP地址被判定為發起DDoS攻擊之后, 
// 需要過多長時間(單位為毫秒)才解除這個IP的連接限制
// (默認值為 600000 毫秒, 即10分鐘)
ddos_autoreset: 600000


import: conf/import/packet_conf.txt
